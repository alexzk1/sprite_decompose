# Contributor: Oleksiy Zakharov <alexzkhr@gmail.com>

pkgname=sprite-decomposer
pkgver=0.6.0
pkgrel=10
pkgdesc="Decompose and create animations from a sprite sheet easily."

provides=('sprite-decomposer')

#not sure, this one may work on arm too ...but never tried
arch=('i686' 'x86_64' 'arm')
url="https://github.com/alexzk1/sprite_decompose"

license=('MIT')
#depends=(qt5-base )
source=("repo::git+$url.git")
md5sums=('SKIP')

build() {
  cd "$srcdir/repo"
  # Проверяем, что у пользователя уже установлено в системе
  if qmake6 -query QT_VERSION >/dev/null 2>&1; then
    _qmake="qmake6"
  elif qmake-qt5 -query QT_VERSION >/dev/null 2>&1; then
    _qmake="qmake-qt5"
  else
    echo "Could not find qt6 or qt5."
    return 1
  fi

  echo "Using $_qmake"
  $_qmake SpriteDecomposer.pro -spec linux-g++
  make
}

package() {
  cd $srcdir/repo
  install -D -m755 SpriteDecomposer $pkgdir/usr/bin/sprite_decomposer

  install -d $pkgdir/usr/share/applications
  install -m644 $srcdir/../sprite_decomposer.desktop $pkgdir/usr/share/applications
  install -m644 $srcdir/repo/SpriteDecomposer.icns $pkgdir/usr/share/applications
}
